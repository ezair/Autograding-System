{% extends "base_generic.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css\main.css' %}" />
<div class="jumbotron">
	<center>
		<h3>Active Courses:</h3>
	</center>
	<br>
	<div class="container">
		<center>
			<div class="col-8">
				<ul class="list-group">
					<a href="#" class="list-group-item list-group-item-action flex-column align-items-start" style="">
						CIS 405 Software Engineering <span class="spacer"></span><span class="badge badge-danger badge-pill maroon">14</span><p class="text-muted instructor-name">Dr. Laura Grabowski</p> 
					</a>
					<a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
						CIS 410 Computer Networks <span class="spacer"></span><span class="badge badge-danger badge-pill maroon">1</span>
						<p class="text-muted instructor-name">Dr. Surpraja Gurajala</p>
					</a>
					<a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
						CIS 303 Analysis of Algorithms <span class="badge badge-danger badge-pill maroon"></span>
						<p class="text-muted instructor-name">Dr. Laura Grabowski</p>
					</a>
				</ul>
			</div>
		</center>
	</div>
</div>
<div class="container-fluid">
	<h3 style="padding-left: 20px;">Upcoming Assignments</h3>
	<br>
	<div class="row"> 
		<div class="col-4">
			<div class="assignment-item">
				<strong>Assignment Uno</strong>
				<p>Assignment short description</p>
				<span><p>Due Date: 3/25/2019 @ 10pm!</span>
			</div>
		</div>
		<div class="col-4">
			<div class="assignment-item">
				<strong>Assignment Dos</strong>
				<p>Assignment short description</p>
				<span><p>Due Date: 3/28/2019 @ 11pm!</span>
			</div>
		</div>
		<div class="col-4">
			<div class="assignment-item">
				<strong>Assignment Tres</strong>
				<p>Assignment short description</p>
				<span><p>Due Date: 3/25/2019 @ 12pm!</p></span>
			</div>
		</div>
	</div>
</div>
<!-- Script for login timeout -->
<script>
	var timeout_cleared = false;
	
	// Keeps the user logged in
	function logInStatus(timeout_cleared) {
		window.clearTimeout();
		timeout_cleared = true;
		$("#full-screen").toggle();
		$("#timeout-banner-container").toggle();
	}
	
	// Logs the user out
	function logOut() {
		window.location.href = "/catalog/logout";
	}
	
	// Display the popup
	function displayLogOutDialogue(timeout_cleared) {
		$("body").prepend("<div id='full-screen'><center><div class='container white maroon' id='final-warning-container'><h2>You will be logged out in a few moments...</h2><button class='btn btn-dark' onClick='logInStatus(timeout_cleared)'>No, don't log me out!</button></div></center></div>");
		window.setTimeout(function (timeoutCleared) {
			if (!timeout_cleared) {
				logOut();
			}
		}, 6000);
	}
	
	// After sometime show the banner
	window.setTimeout(function () {
		// Show the warning banner
		$("body").prepend("<div class='container-fluid maroon white' id='timeout-banner-container'><div id='timeout-banner'>You have been inactive for 10 minutes. {{ user.get_username }} you will be logged out soon.</div></div>" );
		
		// Show the second dialogue box and log you out
		window.setTimeout(function () {
			displayLogOutDialogue();
		}, 12000);
	}, 30000);
</script>
{% endblock %}